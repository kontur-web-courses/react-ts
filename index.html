<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="reveal/css/reveal.css">
    <link rel="stylesheet" href="reveal/css/theme/kontur-light.css" id="theme">
    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="reveal/css/highlight/idea-for-light.css">
    <link rel="stylesheet" href="reveal/css/highlight/darkula-for-dark.css">
    <!--[if lt IE 9]>
    <script src="reveal/js/html5shiv.js"></script>
    <![endif]-->
	<script defer src="reveal/js/head.min.js"></script>
	<script defer src="reveal/js/reveal.js"></script>
	<script defer src="reveal/initialize.js"></script>
	<script defer src="reveal/js/d3.min.js"></script>

    <style>
		.fragment-container {
			position: relative;
		}

		.fragment-container .fragment {
			position: absolute;
			top: 0px;
			width: 100%;
		}

        .tools.tools {
          margin: -30% auto 0;
          height: 100vh;
          display: block;
        }
    </style>

	<title>React</title>
</head>
<body>

<div class="reveal"><div class="slides">

<section data-markdown><script type="text/template">

# React

<p style="text-align: center;"><a href="https://github.com/kontur-web-courses/react-ts">https://github.com/kontur-courses/<b>react-ts</b></a></p>

</script></section>

<section data-markdown><script type="text/template">

## –°–Ω–∞—á–∞–ª–∞ —Å–∞–º–æ–µ ~~–¥–æ–ª–≥–æ–µ~~ –≤–∞–∂–Ω–æ–µ

–°–∫–∞—á–∏–≤–∞–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã Node.js:
```
cd tasks
npm install
```

–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏ dev-—Å–µ—Ä–≤–µ—Ä, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ—à–µ–Ω–∏–π –∑–∞–¥–∞—á:
```cmd
npm run start
```

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∞ <a href="http://localhost:8080">http://localhost:8080</a>

–ü–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ, –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç dev-—Å–µ—Ä–≤–µ—Ä

</script></section>


<!-- ************************************************* -->


<section data-markdown><script type="text/template">

## –ó–∞—á–µ–º –ø–æ–Ω–∞–¥–æ–±–∏–ª—Å—è React?

***

### –°–ª–æ–∏ HTML, JS, CSS üò´

	HTML =================================
	CSS  ======
	JS   ===

–£–¥–æ–±–Ω–æ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –Ω–µ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

***

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ üòç

```
HTML+CSS+JS   |   HTML+CSS+JS   |   HTML+CSS+JS
```

- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç = HTML + JS + CSS
- –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å!
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã: –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ CSS

***

### HTML - –Ω–µ–¥–æ—è–∑—ã–∫ üòû

<pre><code class="lang-html hljs">
&lt;script&gt;
function handleClick() {
	...
}
&lt;/script&gt;

&lt;input type="button" onclick="handleClick()"/&gt;</code></pre>

–•–æ—á–µ—Ç—Å—è –º–µ—Ç–æ–¥–æ–≤ –∏ –æ–ø–∏—Å–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å—Ä–∞–∑—É –∏ —Ä—è–¥–æ–º

***

### JSX = HTML + JS üòá

```js
function ButtonWithHandle() {
    function handleClick() {
	    ...
	}

	return <input type="button" onClick={handleClick}/>
}
```

***

### DOM –º–µ–¥–ª–µ–Ω–Ω—ã–π üòï

–ê –≤–æ—Ç JavaScript ‚Äî –±—ã—Å—Ç—Ä—ã–π –∑–∞ —Å—á–µ—Ç JIT-–∫–æ–º–ø–∏–ª—è—Ü–∏–∏!

***

### VirtualDOM ‚Äî –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è —É–ø—è—á–∫—É üòé

–ò –æ–±–Ω–æ–≤–ª—è–µ—Ç DOM –∫–æ–≥–¥–∞ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —á—Ç–æ-—Ç–æ –ø–æ–º–µ–Ω—è–ª–æ—Å—å

***

### –¢–æ–ª—å–∫–æ View –≤ MV* üî®

React —Ä–µ—à–∞–µ—Ç –æ–¥–Ω—É –ø—Ä–æ–±–ª–µ–º—É –∏ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ —Ö–æ—Ä–æ—à–æ

</script></section>


<!-- ************************************************* -->


<section data-markdown><script type="text/template">

## 1. JSX ‚Äî —É–ª—É—á—à–µ–Ω–Ω—ã–π HTML

***

### –í—Å—Ç–∞–≤–∫–∞ React –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

<pre><code class="lang-html hljs">&lt;div id="app"&gt;&lt;/div&gt;</code></pre>

```js
ReactDom.render(
  <div className="fromReact"></div>,
  document.getElementById('app')
);
```

- –ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –ª—é–±–æ–µ –º–µ—Å—Ç–æ, –¥–∞–∂–µ –≤ –ª–µ–≥–∞—Å–∏
- –ú–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑

***

### –û—Ç–ª–∏—á–∏—è –≤–µ—Ä—Å—Ç–∫–∏ –Ω–∞ JSX

–í–µ—Ä—Å—Ç–∫–∞ –Ω–∞ JSX –ø–æ—Ö–æ–∂–∞ –Ω–∞ HTML, –Ω–æ –µ—Å—Ç—å –æ—Ç–ª–∏—á–∏—è

***

### –≠–ª–µ–º–µ–Ω—Ç—ã

React-–æ–±–µ—Ä—Ç–∫–∏ –¥–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –≤ HTML

**HTML**
<pre><code class="lang-html hljs">&lt;div&gt;&lt;/div&gt; &lt;span&gt;&lt;/span&gt;</code></pre>

**JSX**
<pre><code class="lang-html hljs">&lt;div&gt;&lt;/div&gt; &lt;span&gt;&lt;/span&gt;</code></pre>

***

### –ò–º–µ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ

**HTML**
<pre><code class="lang-html hljs">&lt;div&gt;&lt;/div&gt; –∏–ª–∏ &lt;DIV&gt;&lt;/DIV&gt; –∏–ª–∏ &lt;Div&gt;&lt;/diV&gt;</code></pre>

**JSX**
<pre><code class="lang-html hljs">&lt;div&gt;&lt;/div&gt;</code></pre>

***

### –¢—ç–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç—ã–º–∏

–õ–∏–±–æ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–π —Ç—ç–≥
<pre><code class="lang-html hljs">&lt;div&gt;Hello&lt;/div&gt;</code></pre>

–õ–∏–±–æ —Å–ª—ç—à –≤ –∫–æ–Ω—Ü–µ
<pre><code class="lang-html hljs">&lt;br /&gt;</code></pre>

***

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –≤ camelCase

–í–º–µ—Å—Ç–æ dash-case

**HTML**
<pre><code class="lang-html hljs">&lt;input type="text" tabindex="0" onclick="alert()"&gt;</code></pre>

**JSX**
<pre><code class="lang-html hljs">&lt;input type="text" tabIndex="0" onClick="alert" /&gt;</code></pre>

***

### –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–∞

–ß–µ—Ä–µ–∑ `""` –∫–∞–∫ –≤ HTML

<pre><code class="lang-html hljs">&lt;input type="text" tabIndex="0" /&gt;</code></pre>

–ß–µ—Ä–µ–∑ `{}` —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤—Å—Ç–∞–≤–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ JS

<pre><code class="lang-html hljs">&lt;input type={"text"} tabIndex={a + 5} onClick={() => alert()} /&gt;</code></pre>

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤ IDE —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∏

***

### –í—Å—Ç–∞–≤–∫–∞ –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –≤–µ—Ä—Å—Ç–∫—É

<pre><code class="lang-html hljs">&lt;div&gt;{Math.round(1000/3)}&lt;/div&gt;</code></pre>

***

### Escaping

```js
const title = response.potentiallyMaliciousInput;
// This is safe:
const element = <h1>{title}</h1>;
```

```js
function render() {
  const value = {__html: 'First &middot; Second'};
  return <div dangerouslySetInnerHTML={value} />;
}
```

***

### class ‚Üí className

**HTML**
<pre><code class="lang-html hljs">&lt;div class="red"&gt;&lt;/div&gt;</code></pre>

**JSX**
<pre><code class="lang-html hljs">&lt;div className="red"&gt;&lt;/div&gt;</code></pre>

class ‚Äî —Å–ª–∏—à–∫–æ–º –ø–æ–ø—É–ª—è—Ä–Ω–æ–µ —Å–ª–æ–≤–æ


***

### for ‚Üí htmlFor

**HTML**
<pre><code class="lang-html hljs">&lt;label for="something"&gt;–ù–µ—á—Ç–æ&lt;/label&gt;&lt;input id="something" type="text"&gt;</code></pre>

**JSX**
<pre><code class="lang-html hljs">&lt;label htmlFor="something"&gt;–ù–µ—á—Ç–æ&lt;/label&gt;&lt;input id="something" type="text" /&gt;</code></pre>


***

### style ‚Äî —ç—Ç–æ JS-–æ–±—ä–µ–∫—Ç

**HTML**
<pre><code class="lang-html hljs">&lt;div style="text-align: center; width: 5em; height: 100px"&gt;</code></pre>

**JSX**
<pre><code class="lang-html hljs">&lt;div style={{textAlign: "center", width: "5em", height: 100 }}&gt;</code></pre>

–ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –≤–∏–¥–µ JSON: `{key1: value1, key2: value2}`
–ü–µ—Ä–µ–¥–∞–µ–º —á–µ—Ä–µ–∑ `{}`

***

### value ‚Üí defaultValue,<br>checked ‚Üí defaultChecked

**HTML**
<pre><code class="lang-html hljs">&lt;input type="text" value="Candy"&gt;
&lt;input type="checkbox" checked&gt;
</code></pre>

**JSX**
<pre><code class="lang-html hljs">&lt;input type="text" defaultValue="Candy"/ &gt;
&lt;input type="checkbox" defaultChecked /&gt;
</code></pre>

- –¢–∞–∫ –ª–æ–≥–∏—á–Ω–µ–µ
- –ê—Ç—Ä–∏–±—É—Ç—ã value –∏ checked –≤ React –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è

***

### –ó–∞–¥–∞—á–∞ 1.1. SimpleHtml
### –ó–∞–¥–∞—á–∞ 1.2. Button
### –ó–∞–¥–∞—á–∞ 1.3. Input

***

### Babel: JSX ‚Üí JS

```js
var userName = '–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é';

var mydom = _react2.default.createElement(
  'div',
  { className: 'root' },
  _react2.default.createElement(
    'div',
    { className: 'form' },
    _react2.default.createElement(
      'div',
      { style: { paddingRight: "10px", display: "inline-block" } },
      _react2.default.createElement(
        'label',
        { htmlFor: 'name' },
        '\u0418\u043C\u044F'
      )
    ),
    _react2.default.createElement('input', {
      id: 'name',
      type: 'text',
      size: '39',
      onChange: function onChange(event) {
        var target = event.target;
        debugger;
      },
      onBlur: function onBlur() {
        return alert('userName: ' + userName);
      }
    })
  )
);

_reactDom2.default.render(mydom, document.getElementById('app'));
```

***

### VirtualDOM ‚Äî –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ

```json
{
  "type": "div",
  "key": null,
  "ref": null,
  "props": {
    "className": "root",
    "children": {
      "type": "div",
      "key": null,
      "ref": null,
      "props": {
        "className": "form",
        "children": [
          {
            "type": "div",
            "key": null,
            "ref": null,
            "props": {
              "style": {
                "paddingRight": "10px",
                "display": "inline-block"
              },
              "children": {
                "type": "label",
                "key": null,
                "ref": null,
                "props": {
                  "htmlFor": "name",
                  "children": "–ò–º—è"
                },
                "_owner": null,
                "_store": {

                }
              }
            },
            "_owner": null,
            "_store": {

            }
          },
          {
            "type": "input",
            "key": null,
            "ref": null,
            "props": {
              "id": "name",
              "type": "text",
              "size": "39"
            },
            "_owner": null,
            "_store": {

            }
          }
        ]
      },
      "_owner": null,
      "_store": {

      }
    }
  },
  "_owner": null,
  "_store": {

  }
}
```

***

### VirtualDOM, DOM Elements, SyntheticEvent

<div style="text-align: center">Welcome to the `M A T R I X`</div>

</script></section>


<!-- ************************************************* -->


<section data-markdown><script type="text/template">

## 2. –§—É–Ω–∫—Ü–∏–∏, —Ü–∏–∫–ª—ã, –≤–µ—Ç–≤–ª–µ–Ω–∏—è

***

–ü–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ JSX!

***

### –§—É–Ω–∫—Ü–∏–∏ –∏ –º–µ—Ç–æ–¥—ã

–ø–æ–∑–≤–æ–ª—è—é—Ç –∏–∑–±–∞–≤–ª—è—Ç—å—Å—è –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è!

***

### –ó–∞–¥–∞—á–∞ 2.1. ExtractFunction

***

### –¶–∏–∫–ª—ã –∏ map

**–¶–∏–∫–ª**
```js
const listItems = [];
const numbers = [1, 2, 3, 4, 5];
for (const number of numbers) {
  listItems.push(<li>{number}</li>);
}
```

**map**
```js
const numbers = [1, 2, 3, 4, 5];
const listItems = numbers.map((number) =>
  <li>{number}</li>
);
```

***

### –ö–ª—é—á–∏

```js
const todoItems = todos.map((todo) =>
  <li key={todo.id}>
    {todo.text}
  </li>
);
```

–ü–æ–∑–≤–æ–ª—è—é—Ç React –æ—Ç–ª–∏—á–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
–≠—Ç–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–µ

***

### –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω –∏–Ω–¥–µ–∫—Å

```js
const numbers = [1, 2, 3, 4, 5];
const listItems = numbers.map((number, index) =>
  <li key={index}>{number}</li>
);
```

–ò–Ω–¥–µ–∫—Å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–æ—Ö–æ,
–ø–æ—Ç–æ–º—É —á—Ç–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–æ–∂–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å—Å—è

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —á–∞—Å—Ç–∏ *Reconciliation*

***

### –ó–∞–¥–∞—á–∞ 2.2. List

***

### –í–µ—Ç–≤–ª–µ–Ω–∏—è

**if-else**
```js
if (isLoggedIn) {
  return <UserGreeting />;
}
return <GuestGreeting />;
```

**–¢–µ—Ä–Ω–∞—Ä–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä**
```js
The user is <b>{isLoggedIn ? 'currently' : 'not'}</b> logged in.
```

**&&**
```js
{unreadMessages.length > 0 &&
  <h2>You have {unreadMessages.length} unread messages.</h2>}
```

***

### –°–∫—Ä—ã—Ç—å —ç–ª–µ–º–µ–Ω—Ç

```js
function WarningBanner(props: Props) {
  if (!props.warn) {
    return null;
  }

  return (
    <div className="warning">
      Warning!
    </div>
  );
}
```

–ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É–≤ `null`, `undefined` –∏–ª–∏ `false`

***

### –ó–∞–¥–∞—á–∞ 2.3. Condition

</script></section>


<!-- ************************************************* -->


<section data-markdown><script type="text/template">

## 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

***

### –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–û–Ω–∏ –ø–æ—Ö–æ–∂–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ —É–∑–ª—ã VirtualDOM
```html
<MyComponent a="1" b="message" />
```

–£ –Ω–∏—Ö –º–æ–≥—É—Ç –±—ã—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —É–∑–ª—ã
```html
<Parent>
  <Child />
  <Child />
</Parent>
```

–£ –Ω–∏—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```html
<TextInput defaultValue="Let's go" />
```

***

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```js
function MyComponent(props: Props): ReactNode {
  return (
      <div onClick={props.onFire}>{props.a} {props.b}</div>
  );
}
```

Properties ‚Äî –≤—Ö–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

–û–ø–∏—Å–∞–Ω–∏–µ —Ç–∏–ø–∞ —Å–≤–æ–π—Å—Ç–≤:
```ts
type Props = {
  a: number;
  b: string;
  onFire?: () => void;
};
```

***

### –î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è props

```js
function MyComponent({a, b}: Props): ReactNode {
  return (
      <div>{a} {b}</div>
  );
}
```

***

### Children

```js
function Parent(props: ParentProps): ReactNode {
  return (<div className="green">{props.children}</div>);
}
```

```ts
type ParentProps = {
  a: number;
  b: string;
  children?: ReactNode;
};
```

***

### DefaultProps

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π:
```ts
type MyComponentProps = {
  b?: string;
}

function MyComponent({b = '–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é'}: MyComponentProps): ReactNode
```

–ò–∑–Ω–∞—á–∞–ª—å–Ω—ã–π:
```js
MyComponent.defaultProps = {
  b: '–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é'
}
```

***

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å—Ç—Ä–µ–ª–æ—á–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

```js
const MyComponent = ({a, b}: Props) => <div>{a} {b}</div>
```
```js
const MyComponent: (props: Props) => ReactNode
  = ({a, b}: Props) => <div>{a} {b}</div>
```

```js
const MyComponent: React.FC<Props>
    = ({a, b}: Props) => <div>{a} {b}</div>
```

***

### –ó–∞–¥–∞—á–∞ 3.1. ExtractComponent

***

<!--### –ö–ª–∞—Å—Å—ã-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-->

<!--```js-->
<!--class MyComponent extends React.Component<Props> {-->
<!--  constructor(props: Props) {-->
<!--    super(props);-->
<!--  }-->
<!--  -->
<!--  render() {-->
<!--    // –î–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É—é—â–µ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ-->
<!--    const { a, b } = this.props;-->
<!--    return (-->
<!--	  <div>{a} {b}</div>-->
<!--    );-->
<!--  }-->
<!--}-->
<!--```-->

<!--***-->

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

```js
const Counter: React.FC<Props> = ({ defaultValue, step }) => {
  const [value, setValue] = useState(defaultValue);
  const [checked, setChecked] = useState(false);

  const handleClick = () => {
    setValue(value + step);
  };

  return (
    <div onClick={handleClick} className={checked && 'checked'}>
      {value}
    </div>
  );
};
```

***

### –ù—é–∞–Ω—Å—ã

```js
const handleClick = () => {
    setValue(value + step);
    // value –µ—â–µ –∏–º–µ–µ—Ç —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
}
```
<br>
–ù–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –≤–∑—è—Ç—å –∏ –Ω–∞–ø–∏—Å–∞—Ç—å `value = newValue`
React —ç—Ç–æ –Ω–µ –æ—Ç—Å–ª–µ–¥–∏—Ç –∏ –Ω–µ –æ—Ç—Ä–∏—Å—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

***

### –ó–∞–¥–∞—á–∞ 3.2. Toggle

***

<!--### Functional vs Class-->

<!-- - –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∫–ª–∞—Å—Å—ã-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞–≤–∞–ª–∏ –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, —á–µ–º —Ñ—É–Ω–∫—Ü–∏–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã,-->
<!--–Ω–æ –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ö—É–∫–æ–≤ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å—Ç–∞–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏-->
<!-- - –§—É–Ω–∫—Ü–∏–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —É–¥–æ–±–Ω—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤-->
<!-- - –î–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤—ã–±–æ—Ä –≤ –ø–æ–ª—å–∑—É –∫–ª–∞—Å—Å–æ–≤-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–µ –æ—á–µ–≤–∏–¥–µ–Ω-->

<!--***-->

### –£–ø—Ä–∞–≤–ª—è–µ–º—ã–µ vs –ù–µ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ

**–£–ø—Ä–∞–≤–ª—è–µ–º—ã–π input**
```js
const ControllableInput = () => {
  const [value, setValue] = useState(defaultValue);

  const handleChange = (event: React.ChangeEvent<HTMLInputElement>)
    =>  setValue(event.target.value);

  return <input value={value} onChange={handleChange} />;
}
```

**–ù–µ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–π input**
```js
const UncontrollableInput = () => <input defaultValue="default text"/>;
```

–ï—Å–ª–∏ –≤ `value` —É–ø—Ä–∞–≤–ª—è–µ–º–æ–≥–æ –ø–µ—Ä–µ–¥–∞—Ç—å `undefined`,
—Ç–æ `input` —Å—Ç–∞–Ω–µ—Ç –Ω–µ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–º!

***

### Stateless vs Stateful



***

### Lifting state up

<div style="margin-left: 20px; position: relative">
![children components](assets/LiftStateUp.png)

<div class="fragment" data-fragment-index="1" style="position: absolute; top: 0; background: white;">
  ![with parent component](assets/LiftStateUp2.png)
</div>
</div>

***

### Lifting state up

–ü—É—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç A —Ö—Ä–∞–Ω–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ valueA
–ü—É—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç B —Ö—Ä–∞–Ω–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ valueB

–ï—Å–ª–∏ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–º–µ–Ω—è—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ, —Ç–æ –Ω–∞–¥–æ –ø–æ–¥–Ω—è—Ç—å valueA –∏ valueB –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

–≠—Ç–æ —Ç–µ—Ö–Ω–∏–∫–∞ *Lift state up*

***

### –ó–∞–¥–∞—á–∞ 3.3. MoneyConverter

</script></section>


<!-- ************************************************* -->

  <section data-markdown><script type="text/template">
## 6. Hooks

***

### Hooks

–•—É–∫–∏ ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏-—Ö–µ–ª–ø–µ—Ä—ã. –û–Ω–∏ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç –Ω–µ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ stateless —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –∏ stateful.

***

### useState

```js
const Counter: React.FC = () => {
  const [count, setCount] = useState(0);

  return (
    <>
      <h1>{count}</h1>
      <button onClick={() => setCount(count + 1)}>–î–æ–±–∞–≤–∏—Ç—å</button>
      <button onClick={() => setCount(count - 1)}>–£–±–∞–≤–∏—Ç—å</button>
    </>
  );
};
```

–ú–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø—Ä–∏–º–∏—Ç–∏–≤—ã

***

### useState

```js
type CounterState = { count: number; incrementCount: number };

const Counter: React.FC = () => {
  const [counter, setCounter] = useState<CounterState>({ count: 0, incrementCount: 1 });
  const { count, incrementCount } = counter;

  return (
    <>
      <h1>{count}</h1>
      <button onClick={() => setCounter({ count: count + 1, incrementCount: incrementCount + 1 })}>–î–æ–±–∞–≤–∏—Ç—å</button>
      <button onClick={() => setCounter({ count: count - 1, incrementCount: incrementCount })}>–£–±–∞–≤–∏—Ç—å</button>
    </>
  );
};
```

–ú–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–±—ä–µ–∫—Ç

***

### useState

```js
const Counter: React.FC = () => {
  const [count, setCount] = useState(0);

  return (
    <>
      <h1>{count}</h1>
      <button
        onClick={() => {
          setCount(count + 1);
          setCount(count + 1); // –≤—Å—ë —Ä–∞–≤–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ 1
        }}
      >
        –î–æ–±–∞–≤–∏—Ç—å
      </button>
      <button
        onClick={() => {
          setCount(prevCount => prevCount - 1);
          setCount(prevCount => prevCount - 1); // —É–º–µ–Ω—å—à–∏—Ç—Å—è –Ω–∞ 2
        }}
      >
        –£–±–∞–≤–∏—Ç—å x2
      </button>
    </>
  );
};
```

–í `set***` –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø–æ–ª—É—á–∏—Ç—å  –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!

***

### useRef

```js
function MyFunctionalComponent({value}) {
  const inputRef = useRef<HTMLInputElement>(null);

  return (
    <div>
      <input type="text" ref={inputRef} />
      <button onClick={() => inputRef.current.focus()}>
        –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–æ–∫—É—Å
      </button>
    </div>
    );
}
```
–ó–∞—á–µ–º:
- –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ "—Å—ã—Ä–æ–º—É" DOM —ç–ª–µ–º–µ–Ω—Ç—É
- —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç, —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å `useEffect`

***

### useEffect

```js
function MyFunctionalComponent({value}) {
  const timer = useRef(null);

  useEffect(() => {
    timer.current = setTimeout(console.log, 10000, '–ü—Ä–æ—à–ª–æ 10000 –º—Å');

    return () => { // –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–æ–º —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ–¥ –∞–Ω–º–∞—É–Ω—Ç–æ–º
      clearTimeout(timer.current);
    }
  }, [value]);

  ...
}
```
–≠—Ñ—Ñ–µ–∫—Ç "–ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è" –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ –≤—Ç–æ—Ä–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–µ:
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω `[value]`, —Ç–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ –º–∞—É–Ω—Ç–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `value`
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω `[]`, —Ç–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑, –ø–æ—Å–ª–µ –º–∞—É–Ω—Ç–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω `undefined`, —Ç–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞

***

<!--### –ü–æ–º–Ω–∏—Ç–µ?-->

<!--```js-->
<!--class TimeDisplay extends React.Component {-->
<!--  constructor() {-->
<!--    super();-->
<!--    this.state = { localTime: new Date() };-->
<!--    this.localTickInterval = null;-->
<!--  }-->
<!--  componentDidMount() {-->
<!--    this.localTickInterval = window.setInterval(() => {-->
<!--      this.setState({ localTime: new Date() });-->
<!--    }, 1000);-->
<!--  }-->
<!--  componentWillUnmount() { clearInterval(this.localTickInterval); }-->
<!--  render() { return (<div>{this.state.localTime.toLocaleTimeString()}</div>); }-->
<!--}-->
<!--```-->

<!--***-->

<!--### –ê —Ç–µ–ø–µ—Ä—å –Ω–∞ —Ö—É–∫–∞—Ö! üòé-->

<!--```js-->
<!--function TimeDisplay() {-->
<!--  const [localTime, setLocalTime] = useState(new Date());-->
<!--  const localTickInterval = useRef(null);-->

<!--  useEffect(() => {-->
<!--    localTickInterval.current = window.setInterval(() => {-->
<!--      setLocalTime(new Date());-->
<!--    }, 1000);-->

<!--    return () => {-->
<!--      clearInterval(localTickInterval.current);-->
<!--    }-->
<!--  }, []);-->

<!--  return (<div>{localTime.toLocaleTimeString()}</div>);-->
<!--}-->
<!--```-->

<!--***-->


### –ü—Ä–∞–≤–∏–ª–æ —Ö—É–∫–æ–≤

- –≤—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å–æ —Å–ª–æ–≤–∞ ***use***
- —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- **–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**

***

### –ü–æ—á–µ–º—É —Ö—É–∫–∏ —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ?

–ú–æ–∂–Ω–æ –Ω–µ –≤ –Ω–∞—á–∞–ª–µ, –Ω–æ —Ç–æ—á–Ω–æ –Ω–µ –Ω–∞–¥–æ –≤ —Ü–∏–∫–ª–∞—Ö –∏–ª–∏ —É—Å–ª–æ–≤–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö, –≤–µ–¥—å **React –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–∞ —Ö—É–∫–æ–≤**

```js
function Form() {
// 1. Use the name state variable
  const [name, setName] = useState('Mary');

// 2. Use an effect for persisting the form
  if (name !== '') {
    useEffect(function persistForm() {
      localStorage.setItem('formData', name);
    });
  }

// 3. Use the surname state variable
  const [surname, setSurname] = useState('Poppins');
}
```

***

–ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤:
```js
useState('Mary')        // 1. –°–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 'Mary'
useEffect(persistForm)  // 2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º—É
useState('Poppins')     // 3. –°–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 'Poppins'
```

–í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å —É—Å–ª–æ–≤–∏–µ:
```js
useState('Mary')          // 1. –ß–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è, `Mary` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
// useEffect(persistForm) // üî¥ –≠—Ç–æ—Ç —Ö—É–∫ –ø—Ä–æ–ø—É—â–µ–Ω...
useState('Poppins')       // üî¥ 2 (–Ω–æ –±—ã–ª 3). –ù–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∑–∞—á–∏—Ç–∞—Ç—å —Ñ–∞–º–∏–ª–∏—é
```

***

<!--### –ó–∞–¥–∞—á–∞ 6. Hooks-->

<!--***-->

### –ï—â—ë –Ω–µ–º–Ω–æ–≥–æ —Ö—É–∫–æ–≤
–ø—Ä–∏–≥–æ–¥—è—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

***

### useMemo

```js
function MyFunctionalComponent({value}) {
  const [square, cube] = useMemo(() => {
    return [Math.pow(value, 2), Math.pow(value, 3)];
  }, [value])

  return (
      <div>
        <div>–ó–Ω–∞—á–µ–Ω–∏–µ {value}</div>
        <div>–í –∫–≤–∞–¥—Ä–∞—Ç–µ {square}</div>
        <div>–í –∫—É–±–µ {cube}</div>
      </div>
  );
}
```

`useMemo` ‚Äî –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç

***

### useCallback

```js
function MyFunctionalComponent() {
  const logClick = useCallback(() => {
    console.log('Click');
  }, []);
  // –§—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ,
  // –Ω–æ —Å—Å—ã–ª–∫–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è

  return (
      <>
        [1, 2, 3, 4, 5].map(value =>
        (<button onClick={logClick}>–ö–Ω–æ–ø–∫–∞ ‚Ññ{value}</button>)
        )
      </>
  );
}
```

`useCallback` ‚Äî *useMemo* –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é

***

### –ö–æ–≥–¥–∞-—Ç–æ —Ö—É–∫–æ–≤ –Ω–µ –±—ã–ª–æ ü§Ø

***

### –ö–ª–∞—Å—Å–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```js
class Counter extends React.Component<Props, State> {
  constructor(props: Props) {
    super(props);
	this.state = { value: props.defaultValue, checked: false };
  }
  render() {
    return <div onClick={this.handleClick}
                className={this.state.checked && 'checked'}
           >{this.state.value}</div>;
  }
  handleClick = () => {
    this.setState({
	  value: this.state.value + this.props.step
	});
  }
}

```

***

### –ü–ª—é—Å—ã —Ö—É–∫–æ–≤

- –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚Äî –º–µ–Ω—å—à–µ –±–æ–π–ª–µ—Ä–ø–ª–µ–π—Ç–∞
- –ü—Ä–æ—â–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ù–µ –Ω–∞–¥–æ –ø–µ—Ä–µ–∂–∏–≤–∞—Ç—å –∑–∞ —Ä–∞–±–æ—Ç—É —Å ***this*** –≤ js
- –ê–≥–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (–Ω–∞–ø—Ä. –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –æ—Ç–ø–∏—Å–∫–∏)
- –õ—É—á—à–µ –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç—Å—è, —á–µ–º –∫–ª–∞—Å—Å—ã

<a href="https://reactjs.org/docs/hooks-intro.html#motivation">–ü–æ–¥—Ä–æ–±–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è –æ—Ç –∫–æ–º–∞–Ω–¥—ã –†–µ–∞–∫—Ç–∞</a>


</script></section>

    <!-- ************************************************* -->


<section data-markdown><script type="text/template">

## 4. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

***

### –í–µ—Ö–∏ –∂–∏–∑–Ω–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

- Mounting
- Updating
- Unmounting
- Error Handling

***

### –ú–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
```js
// Mounting
constructor()
static getDerivedStateFromProps()
componentWillMount() / UNSAFE_componentWillMount()
render()
componentDidMount()
```

```js
// Updating
componentWillReceiveProps() / UNSAFE_componentWillReceiveProps()
static getDerivedStateFromProps()
shouldComponentUpdate()
componentWillUpdate() / UNSAFE_componentWillUpdate()
render()
getSnapshotBeforeUpdate()
componentDidUpdate()
```

```js
// Unmounting
componentWillUnmount()
```

```js
// Error Handling
static getDerivedStateFromError()
componentDidCatch()
```

***

`componentWillMount` –ø—Ä–∏–∑–Ω–∞–Ω –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º,
–ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –Ω–µ–º —Å—Ç–∞–ª–∏ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä

–ê –≤–µ–¥—å React –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ:
 - –ø–æ—Å–ª–µ componentWillMount —Å–ª—É—á–∏—Ç—Å—è render
 - componentWillMount –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

–ê –≤–æ—Ç —É `componentDidMount` –≥–∞—Ä–∞–Ω—Ç–∏–∏ –µ—Å—Ç—å:
 - –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –µ–¥–∏–Ω–æ–∂–¥—ã
 - render —É–∂–µ —Ç–æ—á–Ω–æ —Å–ª—É—á–∏–ª—Å—è –∫ –º–æ–º–µ–Ω—Ç—É –≤—ã–∑–æ–≤–∞ componentDidMount
 - –µ—Å–ª–∏ –±—ã–ª –≤—ã–∑–≤–∞–Ω componentDidMount, —Ç–æ —Ç–æ—á–Ω–æ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –∏ componentWillUnmount

***

```js
// Mounting
componentDidMount()
```
–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ —Å–æ–±—ã—Ç–∏—è

<br>
<br>

```js
// Unmounting
componentWillUnmount()
```
–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤, –æ—Ç–ø–∏—Å–æ–∫ –æ—Ç —Å–æ–±—ã—Ç–∏–π

***

<a href="https://codesandbox.io/s/condescending-haze-lnj603?file=/src/Counter.js" target="_blank" rel="noopener noreferrer">–î–µ–º–æ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ</a>

***

### –ó–∞–¥–∞—á–∞ 4.1. Timer

***

<!--### getDerivedStateFromProps-->

<!--–°–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–ª—è—Ç—å state –ø–æ –Ω–æ–≤—ã–º props-->

<!--```js-->
<!--// Mounting-->
<!--static getDerivedStateFromProps(nextProps, prevState)-->
<!--```-->

<!--```js-->
<!--// Updating-->
<!--static getDerivedStateFromProps(nextProps, prevState)-->
<!--```-->

<!--–î–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ state-->
<!--–ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null, —Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å state –Ω–µ –Ω—É–∂–Ω–æ-->

<!--***-->

### componentDidCatch
–ü–æ–∑–≤–æ–ª–∏—Ç –ø–æ–π–º–∞—Ç—å –æ—à–∏–±–∫—É –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∏–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
–ù–µ—Ç –∞–Ω–∞–ª–æ–≥–∞ –Ω–∞ —Ö—É–∫–∞—Ö!

```js
class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true };
  }

  render() {
    if (this.state.hasError) {
      return <h1>–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h1>;
    }

    return this.props.children;
  }
}

ReactDOM.render(
  <ErrorBoundary>
    <SomeChildComponent/>
  </ErrorBoundary>,
  document.getElementById('root')
)

```

</script></section>

<!-- ************************************************* -->

<section data-markdown><script type="text/template">

## 5. –î–æ—Å—Ç—É–ø –∫ DOM

***

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ DOM

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ–∫—É—Å–æ–º, –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ–º –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏, –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞&nbsp;—Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–ª–∏ –µ–≥–æ —Å–∫—Ä–æ–ª–ª–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏, —É–ø—Ä–∞–≤–ª—è—é—â–∏–º–∏ DOM

***

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫

** –î–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ **
```js
function MyFunctionalComponent({value}) {
  const inputRef = useRef<HTMLInputElement>(null);

  return <input type="text" ref={inputRef} />;
}
```

** –î–ª—è –∫–ª–∞—Å—Å–æ–≤ –≤ React 16+ **
```js
constructor() {
  this.divRef = React.createRef<HTMLDivElement>();
}

render () {
  return <div ref={this.divRef} />
}
// –ü–æ—Å–ª–µ render —Å—Å—ã–ª–∫–∞ –æ–∫–∞–∂–µ—Ç—Å—è –≤ this.divRef.current
```

***

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫

** –°–ø–æ—Å–æ–± "–≤ –ª–æ–±" **
```js
myRef: HTMLDivElement | null

constructor() {
  this.myRef = null;
}

render () {
  return <div ref={r => this.myRef = r} />
}
// –ü–æ—Å–ª–µ render —Å—Å—ã–ª–∫–∞ –æ–∫–∞–∂–µ—Ç—Å—è –≤ this.myRef
```

***

### –ú–æ–∂–Ω–æ –ø–æ–≤–µ—à–∞—Ç—å –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```js
<input ref={this.myRef} />

```


```js
<MyComponent ref={this.myRef} />

```

***

### –ó–∞–¥–∞—á–∞ 5. Focus

</script></section>

<!-- ************************************************* -->


<section data-markdown><script type="text/template">

## –ü—Ä–∞–∫—Ç–∏–∫–∞

***

### –ó–∞–¥–∞—á–∞

<img src="userProfile/drafts/reactForm.png" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ userProfile">

***

### –ì–∞–π–¥—ã

<a href="https://guides.kontur.ru/" target="_blank"><img src="assets/guides.png" alt="–°–∫—Ä–∏—à–Ω–æ—Ç –ö–æ–Ω—Ç—É—Ä.–ì–∞–π–¥–æ–≤"></a>

***

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤ React-UI

<a href="http://tech.skbkontur.ru/react-ui/"><img src="assets/react-ui.png" style="border: 1px solid #aaa"
                                                  alt="–°–∫—Ä–∏—à–Ω–æ—Ç React-UI"></a>

***

### –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

<a href="http://tech.skbkontur.ru/react-ui/#/Input" target="_blank">http://tech.skbkontur.ru/react-ui/#/Input</a>

<img src="assets/react-ui-important.png" alt="–û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—É–Ω–∫—Ç—ã view code –∏ props&methods">


***

### –ó–∞–¥–∞—á–∞ userProfile

1. –ü–µ—Ä–µ–π–¥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∑–∞–¥–∞—á–∏: –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è userProfile
2. –£—Å—Ç–∞–Ω–æ–≤–∏ –≤ –Ω–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `npm i`
3. –û—Å—Ç–∞–Ω–æ–≤–∏ –ø—Ä–æ—à–ª—ã–π webpack-—Å–µ—Ä–≤–µ—Ä, –µ—Å–ª–∏ –æ–Ω –≤—Å–µ –µ—â–µ –∑–∞–ø—É—â–µ–Ω.
4. –ó–∞–ø—É—Å—Ç–∏ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –∫–æ–º–∞–Ω–¥–æ–π `npm start`
5. –í —Ñ–∞–π–ª–µ `src/index.tsx` –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è


***

### –û–±—Å—É–∂–¥–µ–Ω–∏–µ. –ü—É–Ω–∫—Ç 7.

1. –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ?
2. –ö–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ?
3. –ö–∞–∫ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ?


</script></section>

<!-- ************************************************* -->


<section data-markdown><script type="text/template">

## 7. Reconciliation

***

### –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```js
class Parent extends React.Component {
  constructor(props) { ... }
  render() {
    const { text } = this.props;
    const { a, b } = this.state;
    return (
	  <div>
	    <h1>{text}</h1>
	    <Child a={a} b={b} />
	  </div>
	);
  }
}
```

***

### –ê–ª–≥–æ—Ä–∏—Ç–º –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–í—Å–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `ReactDom.render` –∏–ª–∏ –¥—Ä—É–≥–æ–≥–æ `render`
...
- Parent constructor
- Parent render
  - h1 render
  - Child constructor
  - Child render
    - ...

***

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ú–æ–∂–µ—Ç –ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–º–µ–Ω—è—Ç—å —Å–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ?
–ú–æ–∂–µ—Ç –ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å —Å–µ–±—è?

***

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å —Å–µ–±—è –∏–ª–∏ –ø–æ–º–µ–Ω—è—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ,
–Ω–æ –º–æ–∂–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ—Ä–µ–∑ `setState` –∏ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞–Ω

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞–Ω, –µ—Å–ª–∏ –µ–≥–æ *—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç* –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∞–Ω

*–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞—Å—Å–∏–≤–µ–Ω*: –∫–æ–≥–¥–∞ –∏ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ—à–∞–µ—Ç React

***

### –ê–ª–≥–æ—Ä–∏—Ç–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–° —á–µ–≥–æ –≤—Å–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è?**

```js
class Parent extends React.Component {
  constructor(props) { ... }
  render() {
    const { text } = this.props;
    const { a, b } = this.state;
    return (
	  <div>
	    <h1>{text}</h1>
	    <Child a={a} b={b} />
	  </div>
	);
  }
}
```


***

–õ—é–±–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–æ `setState` –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–º —É—Ä–æ–≤–Ω–µ

- Parent setState
- Parent render
  - h1 render
  - Child –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
  - Child render
    - ...

*–ù–æ –≤–æ–∑–º–æ–∂–Ω—ã –≤–∞—Ä–∏–∞–Ω—Ç—ã!*

***

### –ü—É—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫

```js
  if (a > 10) {
    return (
      <div>
        <h1>{text}</h1>
        <Bastard a={a} b={b} />
        <Child a={a} b={b} />
      </div>
    );
  }
  return (
    <div>
      <h1>{text}</h1>
      <Child a={a} b={b} />
    </div>
  );

```

***

### –ù–∞ –º–µ—Å—Ç–µ Child –æ–∫–∞–∑–∞–ª—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Bastard

```js
<div>
  <h1>{text}</h1>
  <Bastard a={a} b={b} />
  <Child a={a} b={b} />
</div>
```

–î–∞–∂–µ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã–π Child –∏–¥–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ...

```html
–°—Ç–∞—Ä—ã–π Child —Å–Ω–æ—Å–∏—Ç—Å—è: componentWillUnmount

Bastard —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è: constructor, ... render, componentDidMount

–ù–æ–≤—ã–π Child —Ä–∞–∑–º–µ—á–∞–µ—Ç—Å—è: constructor, ... render, componentDidMount
```

***

### Child –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –ø—Ä–µ–∂–Ω–µ–º –º–µ—Å—Ç–µ

React –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Child,
–≤—ã–∑—ã–≤–∞—è –º–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

```js
// Updating
static getDerivedStateFromProps()
shouldComponentUpdate()
render()
getSnapshotBeforeUpdate()
componentDidUpdate()
```

***

### –¢–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é

```js
return (
  <div>
    <h1>{text}</h1>
    {a > 10 && <Bastard a={a} b={b} />}
    <Child a={a} b={b} />
  </div>
);

```

***

### –ö–æ–Ω—Ç—Ä–æ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```js
// Updating
shouldComponentUpdate(nextProps, nextState)
```

***

### Reconciliation ‚Äî —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ

<p style="text-align: center"><img src="assets/should-component-update.png"></p>

***

### ShouldComponentUpdate –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ü–æ —Å—É—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:
```js
shouldComponentUpdate(nextProps, nextState) {
  return true;
}
```

***

### PureComponent

–ü–æ —Å—É—Ç–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç SCU —Ç–∞–∫:
```js
shouldComponentUpdate(nextProps, nextState) {
  return !shallowEqual(this.props, nextProps);
}
```

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
```js
class MyPureComponent extends React.PureComponent {
  ...
}
```

***

#### PureComponent –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç render —Ä–æ–¥–∏—Ç–µ–ª—è

```js
class Child extends React.PureComponent { ... }

class Parent extends React.Component {
  constructor(props) { ... }
  render() {
    const { text } = this.props;
    const { a, b } = this.state;
    return (
	  <div>
	    <h1>{text}</h1>
	    <Child a={a} b={b} />
	  </div>
	);
  }
}
```

***

#### –ù–æ –Ω–µ –≤—Å–µ–≥–¥–∞...

```js
class Child extends React.PureComponent { ... }

class Parent extends React.Component {
  constructor(props) { ... }
  render() {
    const { text } = this.props;
    const { a, b } = this.state;
    return (
	  <div>
	    <h1>{text}</h1>
	    <Child a={a} b={b} onClick={() => { alert('!'); }} />
	  </div>
	);
  }
}
```

–¢–∞–∫ –∑–∞—á–µ–º –º—ã –ø–∏—à–µ–º —Å—Ç—Ä–µ–ª–æ—á–Ω—ã–µ-–º–µ—Ç–æ–¥—ã –≤–∏–¥–∞ handleClick?

***

#### shouldComponentUpdate –∏ PureComponent –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

```js
const Button = props => {
  // –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
};

const areEqual = (prevProps, nextProps) => {
  // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true, –µ—Å–ª–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–ø—Å–æ–≤ –Ω–µ –Ω—É–∂–µ–Ω —Ä–µ–Ω–¥–µ—Ä
};

export default React.memo(Button, areEqual);
```

–í—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ *React.memo*, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ *PureComponent*

***

#### –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –≤ Hooks

```js
const MyFunctionalComponent = ({ value }) => {
  const cachedObject = useMemo(() => ({
    value: 5,
    doSomething: () => {...},
    doSomethingElse: () => {...}
  })), []);

  const onSave = useCallback(() => {
    executeSomethingOnSave();
  }, []);

  return (
    <PureOrMemoizedComponent onSave={onSave} value={cachedObject} />
  );
});
```

`useCallback` –∏ `useMemo` –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ —Ü–µ–ª–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Äî —ç—Ç–æ *PureComponent*, –∫–ª–∞—Å—Å-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º *shouldComponentUpdate* –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–µ—Ä–Ω—É—Ç—ã–π –≤ *React.memo*
–í –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –º–µ–º–æ–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ–π

***

### –ó–∞–¥–∞—á–∞ 7. UsersTable


</script></section>


<!-- ************************************************* -->


<section data-markdown><script type="text/template">

## 8. Higher Order Components

***

*Higher Order Components (HOC)* ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏
–≤–∏–¥–∞ Component ‚Üí Component

–ò—Å–ø–æ–ª—å–∑—É—è HOC, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ –æ–±—ã—á–Ω—ã—Ö:
```js
const EnhancedComponent = enhance(JustComponent); // enhance ‚Äî —ç—Ç–æ HOC
```

***

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ enhance

```js
function enhance(WrappedComponent) { // –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç...
    class Enhanced extends React.Component { // ...—Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç...
      render() {
        // –°–≤–æ–π—Å—Ç–≤–∞ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏
        const { value1, value2, ...rest } = this.props;
        return ( // –†–µ–Ω–¥–µ—Ä–∏–º –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
            <span className={value2}>
                { value1 }
                <WrappedComponent {...rest} isSelected={true} />
            </span>
        )}
    };

    return Enhanced; // ...–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.
}
```

***

### –î–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

1. –ù–µ –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
2. –í—Å–µ –ø—Ä–æ–ø—Å—ã –ø—Ä–æ–∫–∏–¥—ã–≤–∞—Ç—å –¥–∞–ª—å—à–µ,
   –∫—Ä–æ–º–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±–µ—Ä—Ç–∫–∏
3. –ó–∞–¥–∞–≤–∞—Ç—å displayName: –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ –¥–µ–±–∞–≥–µ

```js
const wrappedName =
  WrappedComponent.displayName || WrappedComponent.name || 'Component';

Enhanced.displayName = `Enhanced(${wrappedName})`;

return Enhanced
```

***

### Forwarded Ref

```js
const someRef = React.createRef();
<EnhancedButton label="Click Me" ref={someRef} />;
```
```js
function enhance(WrappedComponent) {
  class Enhanced extends React.Component {
      render() {
        const {forwardedRef, ...rest} = this.props;
        return <WrappedComponent ref={forwardedRef} {...rest} />
      }
  }
  // React –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ "ref" –≤ props –æ–±—ã—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
  // –ù–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç React.forwardRef –¥–∞–µ—Ç –Ω–∞–º –¥–æ—Å—Ç—É–ø –∫ –∑–Ω–∞—á–µ–Ω–∏—é –∞—Ç—Ä–∏–±—É—Ç–∞ "ref"
  // –∏ —Ç–µ–ø–µ—Ä—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –ø–æ–¥ –¥—Ä—É–≥–∏–º –∏–º–µ–Ω–µ–º.
  return React.forwardRef((props, ref) => {
    return <Enhanced {...props} forwardedRef={ref} />;
  });
}
```

***

### –ó–∞–¥–∞—á–∞ 8. FormRow

***

### –ü—Ä–∏–º–µ—Ä—ã HOC

–†–æ—É—Ç–µ—Ä
```js
const NavbarWithRouter = withRouter(Navbar);
```

Relay
```js
const CommentWithRelay = Relay.createContainer(Comment, config);
```

Redux connect
```js
const ConnectedComment = connect(commentSelector, commentActions)(CommentList);
```

***

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ HOC

1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É. –ö–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö —Å –†–æ—É—Ç–µ—Ä–æ–º –∏ –†–µ–¥–∞–∫—Å–æ–º
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ç–∫–∏ –∏ –º–µ—Ç–æ–¥–æ–≤. –ö–∞–∫ –≤ —Ä–µ—à–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∫–µ

***

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ç–∫–∏ –±–µ–∑ –ª–æ–≥–∏–∫–∏

```js
const FormRow = ({label, children}) => {
  return (
    <div className="row">
      <div className="label">{label}</div>
      {children}
    </div>
  );
}
```

–¢–∞–∫–∂–µ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω [RenderProps](https://ru.reactjs.org/docs/render-props.html)

***

### Wrapper Hell

```js
const withCustomization = WithCustomization(CheckForm);
const withIdentity = WithFormData(withCustomization, FormIdentity, false);
const withDocuments = WithFormData(withIdentity, FormDocuments, true);
const withSignStatement = WithFormData(withDocuments, SignStatementData, true);

const mapStateToProps = state => ({editableForm: state.forms.editableForm});
const mapDispatchToProps = dispatch => bindActionCreators({
  saveForm,
  changeFormStep,
  getFormData
}, dispatch);

export default connect(
  mapStateToProps,
  mapDispatchToProps
)(withSignStatement);
```

***

### –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

–ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ *Hooks* –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏, –∏–∑–±–µ–≥–∞—è –ø—Ä–∏ —ç—Ç–æ–º *WrapperHell*

```js
function useMyOwnHook(initialValue) {
  const [value, setValue] = useState(initialValue);
  const [value2, setValue2] = useState(initialValue);

  useEffect(() => {
    ...
    return () => {
      ...
    };
  }, []);

  return [value, value2];
}
```

</script></section>


<!-- ************************************************* -->


<section data-markdown><script type="text/template">

## 9. Context

***

<p style="text-align: center"><img src="assets/states.png"></p>

***

–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
```js
const CakeContext = React.createContext();
```

–ü–æ—Å—Ç–∞–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è:
```html
<CakeContext.Provider value={cheeseCake}>
  ...
</CakeContext.Provider>
```

–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:
```html
<CakeContext.Consumer>
  {cake => <Hungry food={cake} />}
</CakeContext.Consumer>
```

***

### –ó–∞–¥–∞—á–∞ 9. ColorsOfTime

***

### –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

–ë–µ–∑ —Ö—É–∫–æ–≤:
```js
function Glutton() {
  return (
    <CakeContext.Consumer>
      {cake => <Hungry food={cake} />}
    </CakeContext.Consumer>
  );
}
```

–° —Ö—É–∫–∞–º–∏:
```js
function Glutton() {
  const cake = useContext(CakeContext);
  return <Hungry food={cake} />;
}
```

</script></section>


<!-- ************************************************* -->


<section data-markdown><script type="text/template">

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ


***

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
–ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –ø–æ —Å—Å—ã–ª–∫–µ
<a href="http://bit.ly/kontur-courses-feedback">http://bit.ly/kontur-courses-feedback</a>

</script></section>

</div></div>
</body>
</html>
